{"version":3,"sources":["../../server/controllers/graphql.js"],"names":["router","get","ctx","query","params","db","schemas","body","post","request","variables"],"mappings":"uSAAA,uC;AACA,+C;AACA;AACA,sC;AACA,4C;;AAEA,IAAMA,SAAS,yBAAf;;AAEAA,OAAOC,GAAP,CAAW,iBAAX,qFAA8B,iBAAOC,GAAP;AACpBC,iBADoB,GACVD,IAAIE,MADM,CACpBD,KADoB;AAEN,mCAAOD,IAAIG,EAAJ,EAAP,CAFM,SAEtBC,OAFsB;AAGX,oCAAQ,uBAAUJ,IAAIG,EAAJ,CAAO,MAAP,CAAV,EAA0BC,OAA1B,CAAR,EAA4CH,KAA5C,CAHW,SAG5BD,IAAIK,IAHwB,oFAA9B;;;AAMAP,OAAOQ,IAAP,CAAY,UAAZ,EAAwB,8BAAxB,sFAAqC,kBAAON,GAAP;AAC7BK,gBAD6B,GACtBL,IAAIO,OAAJ,CAAYF,IADU;AAEb,mCAAOL,IAAIG,EAAJ,EAAP,CAFa,SAE7BC,OAF6B;AAGlB;AACf,qCAAUJ,IAAIG,EAAJ,CAAO,MAAP,CAAV,EAA0BC,OAA1B,CADe;AAEfC,mBAAKJ,KAFU;AAGf,kBAHe;AAIf,kBAJe;AAKfI,mBAAKG,SALU,CAHkB,SAGnCR,IAAIK,IAH+B,uFAArC,qE;;;;AAYeP,M","file":"graphql.js","sourcesContent":["import Router from 'koa-router'\nimport bodyParse from 'koa-bodyparser'\nimport { graphql } from 'graphql'\nimport getSchema from '../graphql'\nimport { getAll } from '../models/schemas'\n\nconst router = new Router()\n\nrouter.get('/graphql/:query', async (ctx) => {\n  const { query } = ctx.params\n  const schemas = await getAll(ctx.db())\n  ctx.body = await graphql(getSchema(ctx.db('data'), schemas), query)\n})\n\nrouter.post('/graphql', bodyParse(), async (ctx) => {\n  const body = ctx.request.body\n  const schemas = await getAll(ctx.db())\n  ctx.body = await graphql(\n    getSchema(ctx.db('data'), schemas),\n    body.query,\n    null,\n    null,\n    body.variables,\n  )\n})\n\nexport default router\n"]}