{"version":3,"sources":["../../server/middlewares/mongodb.js"],"names":["connect","mongo","qenya","data","dbs","ctx","next","db","path"],"mappings":"uSAAA;AACA,mC;AACA,6C;;AAEe;;AAEE,iCAAYA,OAAZ,CAAoB,iBAAOC,KAAP,CAAaC,KAAjC,CAFF;AAGC,iCAAYF,OAAZ,CAAoB,iBAAOC,KAAP,CAAaE,IAAjC,CAHD,uCACPC,GADO,KAEXF,KAFW,gBAGXC,IAHW;;;AAMb,wDAAsBC,IAAIF,KAA1B,EANa;;AAQN,6BAAgBG,GAAhB,EAAqBC,IAArB;AACLD,0BAAIE,EAAJ,GAAS,iBAACC,IAAD,uEAAQ,OAAR,QAAoBJ,IAAII,IAAJ,CAApB,EAAT,CADK;AAECF,8BAFD,gEARM,yI","file":"mongodb.js","sourcesContent":["import { MongoClient, ObjectID } from 'mongodb'\nimport config from '../config'\nimport { setObjectID } from '../utils/objectId'\n\nexport default async function () {\n  const dbs = {\n    qenya: await MongoClient.connect(config.mongo.qenya),\n    data: await MongoClient.connect(config.mongo.data),\n  }\n\n  setObjectID(ObjectID, dbs.qenya)\n\n  return async function (ctx, next) {\n    ctx.db = (path = 'qenya') => dbs[path]\n    await next()\n  }\n}\n\n"]}